<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, width=device-width">
    <title>Page Sixth</title>
</head>

<style>

    body {
    background: linear-gradient(to right, #757f9a, #d7dde8);
    }

    h1 {
    display: flex;
    justify-content: center;
<!--    color: gray;-->
    }

    .buttonCustom {
    background: linear-gradient(to right, #403b4a, #e7e9bb);
    box-shadow: (0, 0, 0, 3px);
    }
    .buttonCustom:hover {
    background: linear-gradient(to right, #403b4a, #e7e9bb);

    }
    .buttonCustom:hover:active {
    background: linear-gradient(to left, #403b4a, #e7e9bb);
    transform: 25deg;
    margin-left: 10px;
    }

    .card {
    margin-top: 20px;
    display: flex;
    justify-content: center;
    }

    .btn-bck {
    display: flex;
    justify-content: flex-start;
    }

    .upl {
    display: flex;
    justify-content: center;
    }

    .upl_two {
    display: flex;
    justify-content: center;
    }

    p {
    margin-top: 20px;
    display: flex;
    justify-content: center;
    }

    .present_image {
    margin-top: 20px;
    display: flex;
    justify-content: center;
    }

    .xz {
    margin-top: 20px;
    display: flex;
    justify-content: center;

    }
    .xy {
    margin-top: 20px;
    display: flex;
    justify-content: center;

    }

    .xp {
    margin-top: 20px;
    display: flex;
    justify-content: center;

    }

    .xo {
    margin-top: 20px;
    display: flex;
    justify-content: center;
    }

    .cl_mg {
    margin-top: 20px;
    margin-left: 20px;
    padding: 20px;
    border-radius: 10px;
    background: pink;
    width: 400px;
    }

    .cl_mn {
    margin-top: 20px;
    margin-left: 20px;
    padding: 20px;
    border-radius: 10px;
    background: pink;
    width: 400px;
    }

    .gi {
    margin-top: 20px;
    margin-left: 20px;
    padding: 20px;
    border-radius: 10px;
    background: pink;
    width: 400px;
    }


    .buttonQWE{
    background: #222222;
    color: gray;
    box-shadow: (0, 0, 0, 3px);
    }
    .buttonQWE:hover {
    background: #222222;
    color: gray;
    }
    .buttonQWE:active {
    background: gray;
    margin-left: 10px;
    transform: (0, 0, 0, 5px);
    }
    .buttonQWE:hover:active {
    background: black;
    color: red;
    transform: 25deg;
    }

    .response_window {
    margin-top: 20px;
    }

    .navbar_x {
    width: 200px;

    }

    .img_from_cloud {
    margin-top: 20px;
    display: flex;
    justify-content: center;
    }
</style>

<style>
    textarea {
    width: 200px;
    height: 50px;
    }

</style>

<body>

<h1>Шестая страница</h1>

<div class="card">

    <div class="btn-on">
        <p>On</p>
    </div>

    <div class="btn-bck">
        <form action="#">
            <button class="buttonCustom" type="submit" id="buttonY">noidea</button>

        </form>
    </div>

    <div class="ml"><p>Off</p></div>


</div>

    </form>
</div>

<div class="present_image">

<!--    <img th:src="@{'/images/' + ${1}}" alt="Пример изображения">-->

    <div class="xz">
        <form th:action="@{'/images/' + ${152}}">
            <button class="buttonQWE" type="submit">
                <img th:src="@{'/images/' + ${152}}" alt="Пример изображения" width="340" height="200">
            </button>
        </form>

    </div>

    <div class="xy">
        <form th:action="@{'/images/' + ${153}}">
            <button class="buttonQWE" type="submit">
                <img th:src="@{'/images/' + ${153}}" alt="Пример изображения" width="340" height="200">
            </button>
        </form>

    </div>

</div>

<p>Старый добрый вариант сохранения изображения в базу данных</p><br><br>

<div class="upl_two">


    <form action="/image_stat/create" method="post" enctype="multipart/form-data">
        <label>Файл</label>
        <input type="file" name="file1"><br><br>
        <label>Название</label>
        <input type="text" name="name" placeholder="name"><br><br>
        <label>Описание</label>
        <input type="text" name="description" placeholder="description"><br><br>
        <input type="submit" class="buttonCustom" value="upload" id="addItem">


    </form>
</div>

<script>
    function addItem() {
    alert("Изображение успешно сохранено в базу данных")
    }
</script>

<h1>Вставка изображения</h1>
<p>ID файла: <input type="text" id="fileId" value="1rX3qTEzEXFFFA5t8b7WVqORdq1ObGuMZ"></p>

<div class="cl_mg">

    <h2>Сохранение ссылки в базу данных</h2><br>
    <form action="/cloud_message/post" method="post" enctype="multipart/form-data">
        <label>
            Ссылка на файл в Google Drive:
            <input type="text" class="navbar_x" name="cloudName">
        </label>
        <button type="submit">Отправить</button>
    </form>


    <form action="#">
        <div class="response_window">
            <label>
                <textarea data-th-text="${test2}" id="t_a"></textarea>
            </label>
        </div>
    </form>
</div>

<div class="gi">
    <h2>Получение ID файла Google Drive</h2><br>

    <label for="cloud-name">Введите полный публичный URL файла:</label><br>
    <input type="text" id="cloud-name" placeholder="https://drive.google.com/file/d/1EazFVTVzs5_hXZL-dhTe2-Y3D6CmP8BK/view?usp=sharing" /><br>
    <button onclick="getDriveFileId()">Получить ID</button><br>
    <label for="result-id">ID файла:</label><br>
    <textarea id="result-id" rows="1" cols="50"></textarea>
</div>

<script>
    function getDriveFileId() {
        let cloudName = document.getElementById("cloud-name").value.trim();
        let fileId = extractFileId(cloudName);
        if (fileId) {
            document.getElementById("result-id").value = fileId;
        } else {
            alert("Не удалось найти ID файла в ссылке.");
        }
    }

    function extractFileId(cloudName) {
        const regex = /\/file\/d\/(.*?)\//;
        const matches = cloudName.match(regex);
        return matches ? matches[1] : null;
    }
</script>


<!--<div class="xp" id="images-container"></div>-->

<div class="xo">
    <form action="http://localhost:8081/proxy/1GHWlihA_pabY9D-AYvMf0bqE6i7ZLi__">
        <button class="buttonQWE" type="submit">
            <img src="http://localhost:8081/proxy/1UaBIbUNDXMrhT8cN2FH3alZayGIOVTl_" width="340" height="200">
        </button>
    </form>
</div>

<!--<script>-->
<!--    // Массив объектов, представляющих строки из базы данных-->
<!--    const imagesData = [-->

<!--        { id: 2, cloud_id: "1GHWlihA_pabY9D-AYvMf0bqE6i7ZLi__", cloud_name: "Google Drive" },-->
<!--        { id: 3, cloud_id: "1UaBIbUNDXMrhT8cN2FH3alZayGIOVTl_", cloud_name: "Google Drive" }-->
<!--    ];-->

<!--    const proxyUrl = 'http://localhost:8081/proxy/';-->

<!--    imagesData.forEach(image => {-->
<!--        const img = new Image();-->
<!--        img.onload = () => {-->
<!--            document.getElementById('images-container').appendChild(img);-->
<!--        };-->
<!--        img.onerror = () => {-->
<!--            console.error(`Ошибка загрузки изображения с id ${image.id}`);-->
<!--        };-->
<!--        img.src = `${proxyUrl}${image.cloud_id}`;-->
<!--    });-->
<!--</script>-->


<div class="">
    <img src="">
</div>

<div class="cl_mn">
    <h2>Преобразование ссылки Google Drive</h2>

    <label for="public-link">Введите публичную ссылку:</label><br />
    <input type="text" id="public-link" placeholder="https://drive.google.com/file/d/[FILE_ID]/view?usp=sharing" /><br />
    <button onclick="convertToDirectLink()">Преобразовать</button><br />
    <label for="result-link">Прямая ссылка для скачивания:</label><br />
    <textarea id="result-link" rows="4" cols="50"></textarea>
</div>

<script>
    function convertToDirectLink() {
        let publicUrl = document.getElementById("public-link").value.trim();
        let fileId = extractFileId(publicUrl);
        if (fileId) {
            let directDownloadUrl = `https://drive.google.com/uc?id=${fileId}`;
            document.getElementById("result-link").value = directDownloadUrl;
        } else {
            alert("Не удалось найти ID файла в ссылке.");
        }
    }

    function extractFileId(publicUrl) {
        const regex = /\/file\/d\/(.*?)\//;
        const matches = publicUrl.match(regex);
        return matches ? matches[1] : null;
    }
</script>

</body>
</html>